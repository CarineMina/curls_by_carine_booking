<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curls by Carine - Booking System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #000;
            --secondary: #D4AF37;
            --light: #f8f5f0;
            --white: #fff;
            --gray: #eee;
        }
        
        /* Admin Panel Styles */
        .admin-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: white;
            padding: 20px;
            border: 2px solid var(--secondary);
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
            max-width: 400px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .admin-btn {
            background: var(--secondary);
            color: var(--primary);
            border: 2px solid var(--primary);
            padding: 8px 12px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8em;
            min-width: 80px;
        }
        
        .admin-btn:hover {
            background: var(--primary);
            color: var(--secondary);
        }
        
        .booking-item {
            padding: 10px;
            margin: 8px 0;
            border: 1px solid var(--secondary);
            border-radius: 5px;
            background-color: rgba(212, 175, 55, 0.1);
        }
        
        #admin-access-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 999;
            background: var(--secondary);
            color: var(--primary);
            border: 2px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <!-- Admin Access Button -->
    <div id="admin-access-btn" onclick="showAdminLogin()">
        <i class="fas fa-lock"></i>
    </div>

    <!-- Admin Panel Script -->
    <script>
        // Admin System
        const ADMIN_PASSWORD = "CurlsByCarine123"; // Change this password
        let isAdminLoggedIn = false;
        let availableTimes = [];
        let bookings = [];

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Load any saved data from localStorage
            const savedTimes = localStorage.getItem('availableTimes');
            const savedBookings = localStorage.getItem('bookings');
            
            if (savedTimes) availableTimes = JSON.parse(savedTimes);
            if (savedBookings) bookings = JSON.parse(savedBookings);
            
            updateCustomerTimeSlots();
        });

        function showAdminLogin() {
            const password = prompt("Enter admin password:");
            if (password === ADMIN_PASSWORD) {
                isAdminLoggedIn = true;
                showAdminPanel();
            } else if (password !== null) {
                alert("Incorrect password");
            }
        }

        function showAdminPanel() {
            if (!isAdminLoggedIn) return;
            
            // Remove existing panel if any
            const existingPanel = document.getElementById('admin-panel');
            if (existingPanel) existingPanel.remove();
            
            const adminHTML = `
                <div id="admin-panel" class="admin-panel">
                    <h2 style="color:var(--secondary); margin-top:0; text-align:center;">Admin Panel</h2>
                    
                    <div style="display:flex; justify-content:space-between; margin-bottom:15px;">
                        <button onclick="addTimeSlots()" class="admin-btn">
                            <i class="fas fa-plus"></i> Add Slots
                        </button>
                        <button onclick="clearAllTimes()" class="admin-btn" style="background:#ff4444; border-color:#ff4444;">
                            <i class="fas fa-trash"></i> Clear All
                        </button>
                        <button onclick="closeAdminPanel()" class="admin-btn">
                            <i class="fas fa-times"></i> Close
                        </button>
                    </div>
                    
                    <h3><i class="fas fa-clock"></i> Available Time Slots</h3>
                    <div id="current-times-list" style="max-height:150px; overflow-y:auto; margin-bottom:15px; border:1px solid var(--gray); padding:10px; border-radius:5px;">
                        ${availableTimes.length > 0 ? 
                          availableTimes.map(time => `
                            <div style="display:flex; justify-content:space-between; align-items:center; padding:5px 0; border-bottom:1px solid #eee;">
                                <span>${time}</span>
                                <button onclick="removeTimeSlot('${time}')" class="admin-btn" style="padding:3px 8px; font-size:0.7em;">
                                    <i class="fas fa-times"></i> Remove
                                </button>
                            </div>
                          `).join('') : 
                          '<p style="text-align:center; color:var(--secondary);">No time slots available</p>'}
                    </div>
                    
                    <hr style="border-color:var(--secondary); margin:15px 0;">
                    
                    <h3><i class="fas fa-calendar-check"></i> Recent Bookings (${bookings.length})</h3>
                    <div id="bookings-list" style="max-height:200px; overflow-y:auto; border:1px solid var(--gray); padding:10px; border-radius:5px;">
                        ${bookings.length > 0 ? 
                          bookings.map(booking => `
                            <div class="booking-item">
                                <strong>${booking.name}</strong><br>
                                <small>${booking.date} at ${booking.time}</small><br>
                                Services: ${booking.services.join(', ')}<br>
                                Total: ${booking.total} EGP
                            </div>
                          `).reverse().join('') : 
                          '<p style="text-align:center; color:var(--secondary);">No bookings yet</p>'}
                    </div>
                </div>
            `;
            
            document.body.insertAdjacentHTML('beforeend', adminHTML);
        }

        function addTimeSlots() {
            const date = prompt("Enter date (YYYY-MM-DD):");
            if (!date) return;
            
            const timesInput = prompt("Enter time slots (comma separated):\nExample: 10:00 AM, 2:00 PM");
            if (!timesInput) return;
            
            const newTimes = timesInput.split(',')
                .map(t => t.trim())
                .filter(t => t)
                .map(t => `${date} - ${t}`);
                
            availableTimes = [...new Set([...availableTimes, ...newTimes])];
            saveData();
            showAdminPanel(); // Refresh the panel
            updateCustomerTimeSlots();
            alert(`Added ${newTimes.length} new time slot(s)`);
        }

        function removeTimeSlot(time) {
            if (confirm(`Delete this time slot?\n${time}`)) {
                availableTimes = availableTimes.filter(t => t !== time);
                saveData();
                showAdminPanel(); // Refresh the panel
                updateCustomerTimeSlots();
            }
        }

        function clearAllTimes() {
            if (confirm("Are you sure you want to delete ALL time slots?")) {
                availableTimes = [];
                saveData();
                showAdminPanel(); // Refresh the panel
                updateCustomerTimeSlots();
            }
        }

        function closeAdminPanel() {
            const panel = document.getElementById('admin-panel');
            if (panel) panel.remove();
        }

        function updateCustomerTimeSlots() {
            // This function would update the customer-facing time slots
            // You need to implement this based on your customer interface
            console.log("Time slots updated:", availableTimes);
        }

        function saveData() {
            localStorage.setItem('availableTimes', JSON.stringify(availableTimes));
            localStorage.setItem('bookings', JSON.stringify(bookings));
        }

        // Simulate capturing a booking (for demo purposes)
        function simulateBooking() {
            const sampleBooking = {
                name: "Test Customer",
                services: ["Hair Cut", "Coloring"],
                date: new Date().toISOString().split('T')[0],
                time: "2:00 PM",
                total: "350"
            };
            bookings.push(sampleBooking);
            saveData();
            showAdminPanel(); // Refresh the panel
        }
    </script>
</body>
</html>
